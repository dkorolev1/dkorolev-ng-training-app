(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{CXQP:function(t,e,n){"use strict";n.r(e),n.d(e,"ShoppingListModule",(function(){return X}));var i=n("3Pt+"),o=n("tyNb"),s=n("PCNd"),c=n("OTVi"),r=n("R0Ic"),b=n("sPvp"),a=n("kt0X"),d=n("ZSCJ");const l=Object(a.j)(d.a,t=>t.ingredients),u=Object(a.j)(d.a,t=>Object.assign({id:t.editedIngredientId},t.editedIngredient)),p=Object(a.j)(l,t=>Object.keys(t).map(e=>t[e])),m=Object(a.j)(l,t=>Object.keys(t).length);var f=n("fXoL");class h{constructor(t,e,n){this.name=t,this.amount=e,this.id=n}}var g=n("ofXK");const O=["form"];function v(t,e){if(1&t){const t=f.Pb();f.Ob(0,"button",14),f.Wb("click",(function(){return f.ic(t),f.Yb().onDelete()})),f.nc(1," Delete "),f.Nb()}}let j=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.editModeSubscription=this.store.select(u).subscribe(t=>{t.id?(this.editMode=!0,this.editedIngredient=t,this.form.setValue({name:this.editedIngredient.name,amount:this.editedIngredient.amount})):this.editMode=!1})}onSubmit(){const t=new h(this.form.value.name,this.form.value.amount);let e=null;e=this.editMode?b.i({ingredient:Object.assign({id:this.editedIngredient.id},t)}):b.a({ingredients:[t]}),this.store.dispatch(e),this.onClear()}onClear(){this.store.dispatch(b.h()),this.clear()}onDelete(){this.store.dispatch(b.c({id:this.editedIngredient.id})),this.clear()}clear(){this.form.reset(),this.editMode=!1,this.editedIngredient=null}ngOnDestroy(){this.editModeSubscription.unsubscribe(),this.store.dispatch(b.h())}}return t.\u0275fac=function(e){return new(e||t)(f.Jb(a.b))},t.\u0275cmp=f.Db({type:t,selectors:[["app-shopping-edit"]],viewQuery:function(t,e){var n;1&t&&f.rc(O,!0),2&t&&f.ec(n=f.Xb())&&(e.form=n.first)},decls:20,vars:3,consts:[[1,"row"],[1,"col-xs-12"],[3,"ngSubmit"],["form","ngForm"],[1,"col-sm-5","form-group"],["for","name"],["ngModel","","required","","id","name","type","text","name","name",1,"form-control"],[1,"col-sm-2","form-group"],["for","amount"],["ngModel","","required","","id","amount","type","text","name","amount",1,"form-control"],[1,"col-sm-5","btn-toolbar"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){if(1&t&&(f.Ob(0,"div",0),f.Ob(1,"div",1),f.Ob(2,"form",2,3),f.Wb("ngSubmit",(function(){return e.onSubmit()})),f.Ob(4,"div",0),f.Ob(5,"div",4),f.Ob(6,"label",5),f.nc(7,"Name"),f.Nb(),f.Kb(8,"input",6),f.Nb(),f.Ob(9,"div",7),f.Ob(10,"label",8),f.nc(11,"Amount"),f.Nb(),f.Kb(12,"input",9),f.Nb(),f.Nb(),f.Ob(13,"div",0),f.Ob(14,"div",10),f.Ob(15,"button",11),f.nc(16),f.Nb(),f.lc(17,v,2,0,"button",12),f.Ob(18,"button",13),f.Wb("click",(function(){return e.onClear()})),f.nc(19," Cancel "),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Nb()),2&t){const t=f.fc(3);f.zb(15),f.bc("disabled",!t.valid),f.zb(1),f.pc(" ",e.editMode?"Update":"Add"," "),f.zb(1),f.bc("ngIf",e.editMode)}},directives:[i.s,i.m,i.n,i.a,i.l,i.o,i.q,g.j],styles:[""]}),t})();function y(t,e){if(1&t){const t=f.Pb();f.Ob(0,"button",7),f.Wb("click",(function(){return f.ic(t),f.Yb().onSave()})),f.nc(1," Save as PDF "),f.Nb()}}function I(t,e){if(1&t){const t=f.Pb();f.Ob(0,"a",8),f.Wb("click",(function(){f.ic(t);const n=e.$implicit;return f.Yb().onEditItem(n.id)})),f.nc(1),f.Nb()}if(2&t){const t=e.$implicit;f.bc("@ingredient",void 0),f.zb(1),f.qc(" ",t.name," (",t.amount,") ")}}function N(t,e){1&t&&(f.Ob(0,"small"),f.nc(1," Your Shopping List seems to be empty so far ... "),f.Nb())}let k=(()=>{class t{constructor(t){this.store=t}ngOnInit(){console.log("init"),this.ingredients$=this.store.select(p)}onEditItem(t){this.store.dispatch(b.g({id:t}))}onSave(){window.print()}}return t.\u0275fac=function(e){return new(e||t)(f.Jb(a.b))},t.\u0275cmp=f.Db({type:t,selectors:[["app-shopping-list"]],decls:12,vars:9,consts:[[1,"row"],[1,"col-xs-10"],[1,"ingredient-edit"],["type","button","class","btn btn-link save-btn",3,"click",4,"ngIf"],[1,"list-group"],["class","list-group-item","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",1,"btn","btn-link","save-btn",3,"click"],[1,"list-group-item",2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(f.Ob(0,"div",0),f.Ob(1,"div",1),f.Ob(2,"div",2),f.Kb(3,"app-shopping-edit"),f.Nb(),f.lc(4,y,2,0,"button",3),f.Zb(5,"async"),f.Kb(6,"hr"),f.Ob(7,"ul",4),f.lc(8,I,2,3,"a",5),f.Zb(9,"async"),f.Nb(),f.lc(10,N,2,0,"small",6),f.Zb(11,"async"),f.Nb(),f.Nb()),2&t&&(f.zb(4),f.bc("ngIf",f.ac(5,3,e.ingredients$).length>0),f.zb(4),f.bc("ngForOf",f.ac(9,5,e.ingredients$)),f.zb(2),f.bc("ngIf",0===f.ac(11,7,e.ingredients$).length))},directives:[j,g.j,g.i],pipes:[g.b],styles:["@media print{.ingredient-edit[_ngcontent-%COMP%], .save-btn[_ngcontent-%COMP%]{display:none!important;height:0}}.save-btn[_ngcontent-%COMP%]{float:right}"],data:{animation:[Object(r.j)("ingredient",[Object(r.g)("in",Object(r.h)({opacity:1,transform:"translateX(0px)"})),Object(r.i)("void => *",[Object(r.h)({opacity:0,transform:"translateX(-100px)"}),Object(r.e)(300)]),Object(r.i)("* => void",[Object(r.e)(300,Object(r.h)({opacity:0,transform:"translateX(100px)"}))])])]}}),t})();var w=n("LRne"),M=n("snw9"),S=n("IzEk"),C=n("eIep");const P=[{path:"",canActivate:[c.a],component:k,resolve:[(()=>{class t{constructor(t,e){this.store=t,this.actions$=e}resolve(){return this.store.select(m).pipe(Object(S.a)(1),Object(C.a)(t=>0===t?(this.store.dispatch(b.e()),this.actions$.pipe(Object(M.d)(b.f),Object(S.a)(1))):Object(w.a)(void 0)))}}return t.\u0275fac=function(e){return new(e||t)(f.Sb(a.b),f.Sb(M.a))},t.\u0275prov=f.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]}];let z=(()=>{class t{}return t.\u0275mod=f.Hb({type:t}),t.\u0275inj=f.Gb({factory:function(e){return new(e||t)},imports:[[o.j.forChild(P)],o.j]}),t})(),X=(()=>{class t{}return t.\u0275mod=f.Hb({type:t}),t.\u0275inj=f.Gb({factory:function(e){return new(e||t)},imports:[[i.j,o.j,s.a,z]]}),t})()}}]);