(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{CXQP:function(t,e,n){"use strict";n.r(e),n.d(e,"ShoppingListModule",(function(){return X}));var i=n("3Pt+"),o=n("tyNb"),s=n("PCNd"),c=n("OTVi"),r=n("R0Ic"),b=n("sPvp"),a=n("kt0X"),d=n("ZSCJ");const l=Object(a.j)(d.a,t=>t.ingredients),u=Object(a.j)(d.a,t=>Object.assign({id:t.editedIngredientId},t.editedIngredient)),p=Object(a.j)(l,t=>Object.keys(t).map(e=>t[e])),m=Object(a.j)(l,t=>Object.keys(t).length);var h=n("fXoL");class f{constructor(t,e,n){this.name=t,this.amount=e,this.id=n}}var O=n("ofXK");const g=["form"];function j(t,e){if(1&t){const t=h.Pb();h.Ob(0,"button",14),h.Wb("click",(function(){return h.ic(t),h.Yb().onDelete()})),h.nc(1," Delete "),h.Nb()}}let v=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.editModeSubscription=this.store.select(u).subscribe(t=>{t.id?(this.editMode=!0,this.editedIngredient=t,this.form.setValue({name:this.editedIngredient.name,amount:this.editedIngredient.amount})):this.editMode=!1})}onSubmit(){const t=new f(this.form.value.name,this.form.value.amount);let e=null;e=this.editMode?b.i({ingredient:Object.assign({id:this.editedIngredient.id},t)}):b.a({ingredients:[t]}),this.store.dispatch(e),this.onClear()}onClear(){this.store.dispatch(b.h()),this.clear()}onDelete(){this.store.dispatch(b.c({id:this.editedIngredient.id})),this.clear()}clear(){this.form.reset(),this.editMode=!1,this.editedIngredient=null}ngOnDestroy(){this.editModeSubscription.unsubscribe(),this.store.dispatch(b.h())}}return t.\u0275fac=function(e){return new(e||t)(h.Jb(a.b))},t.\u0275cmp=h.Db({type:t,selectors:[["app-shopping-edit"]],viewQuery:function(t,e){var n;1&t&&h.rc(g,!0),2&t&&h.ec(n=h.Xb())&&(e.form=n.first)},decls:20,vars:3,consts:[[1,"row"],[1,"col-xs-12"],[3,"ngSubmit"],["form","ngForm"],[1,"col-sm-5","form-group"],["for","name"],["ngModel","","required","","id","name","type","text","name","name",1,"form-control"],[1,"col-sm-2","form-group"],["for","amount"],["ngModel","","required","","id","amount","type","text","name","amount",1,"form-control"],[1,"col-sm-5","btn-toolbar"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){if(1&t&&(h.Ob(0,"div",0),h.Ob(1,"div",1),h.Ob(2,"form",2,3),h.Wb("ngSubmit",(function(){return e.onSubmit()})),h.Ob(4,"div",0),h.Ob(5,"div",4),h.Ob(6,"label",5),h.nc(7,"Name"),h.Nb(),h.Kb(8,"input",6),h.Nb(),h.Ob(9,"div",7),h.Ob(10,"label",8),h.nc(11,"Amount"),h.Nb(),h.Kb(12,"input",9),h.Nb(),h.Nb(),h.Ob(13,"div",0),h.Ob(14,"div",10),h.Ob(15,"button",11),h.nc(16),h.Nb(),h.lc(17,j,2,0,"button",12),h.Ob(18,"button",13),h.Wb("click",(function(){return e.onClear()})),h.nc(19," Cancel "),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Nb()),2&t){const t=h.fc(3);h.zb(15),h.bc("disabled",!t.valid),h.zb(1),h.pc(" ",e.editMode?"Update":"Add"," "),h.zb(1),h.bc("ngIf",e.editMode)}},directives:[i.s,i.m,i.n,i.a,i.l,i.o,i.q,O.j],styles:[""]}),t})();function y(t,e){if(1&t){const t=h.Pb();h.Ob(0,"a",4),h.Wb("click",(function(){h.ic(t);const n=e.$implicit;return h.Yb().onEditItem(n.id)})),h.nc(1),h.Nb()}if(2&t){const t=e.$implicit;h.bc("@ingredient",void 0),h.zb(1),h.qc(" ",t.name," (",t.amount,") ")}}let N=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.ingredients$=this.store.select(p)}onEditItem(t){this.store.dispatch(b.g({id:t}))}}return t.\u0275fac=function(e){return new(e||t)(h.Jb(a.b))},t.\u0275cmp=h.Db({type:t,selectors:[["app-shopping-list"]],decls:7,vars:3,consts:[[1,"row"],[1,"col-xs-10"],[1,"list-group"],["class","list-group-item","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(h.Ob(0,"div",0),h.Ob(1,"div",1),h.Kb(2,"app-shopping-edit"),h.Kb(3,"hr"),h.Ob(4,"ul",2),h.lc(5,y,2,3,"a",3),h.Zb(6,"async"),h.Nb(),h.Nb(),h.Nb()),2&t&&(h.zb(5),h.bc("ngForOf",h.ac(6,1,e.ingredients$)))},directives:[v,O.i],pipes:[O.b],styles:[""],data:{animation:[Object(r.j)("ingredient",[Object(r.g)("in",Object(r.h)({opacity:1,transform:"translateX(0px)"})),Object(r.i)("void => *",[Object(r.h)({opacity:0,transform:"translateX(-100px)"}),Object(r.e)(300)]),Object(r.i)("* => void",[Object(r.e)(300,Object(r.h)({opacity:0,transform:"translateX(100px)"}))])])]}}),t})();var I=n("LRne"),w=n("snw9"),k=n("IzEk"),M=n("eIep");const S=[{path:"",canActivate:[c.a],component:N,resolve:[(()=>{class t{constructor(t,e){this.store=t,this.actions$=e}resolve(){return this.store.select(m).pipe(Object(k.a)(1),Object(M.a)(t=>0===t?(this.store.dispatch(b.e()),this.actions$.pipe(Object(w.d)(b.f),Object(k.a)(1))):Object(I.a)(void 0)))}}return t.\u0275fac=function(e){return new(e||t)(h.Sb(a.b),h.Sb(w.a))},t.\u0275prov=h.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]}];let C=(()=>{class t{}return t.\u0275mod=h.Hb({type:t}),t.\u0275inj=h.Gb({factory:function(e){return new(e||t)},imports:[[o.j.forChild(S)],o.j]}),t})(),X=(()=>{class t{}return t.\u0275mod=h.Hb({type:t}),t.\u0275inj=h.Gb({factory:function(e){return new(e||t)},imports:[[i.j,o.j,s.a,C]]}),t})()}}]);